---
title: "dlyr102data"
format: html
editor: visual
author: Disem Sula
---

```{r}
#| echo: false
#| message: false
here::i_am("dplyr-102.Rproj")
library(here)
library(vroom)
library(dplyr)
library(tidyr)
library(ggplot2)
```

### Financial data analasys
```{r}
#| echo: false
#| message: false
client <- vroom("data/client.csv")
accounts <- vroom("data/account.csv")
disp <- vroom("data/disp.csv")
```

## data tables
A collecton of joing fuinction

### Clear data
```{r}
da <- inner_join(accounts, disp)
```

```{r}
cda <- inner_join(client, da, by=join_by(client_id, suffix= "_home", "_bank"))
```
```{r}
home_diff_bank <- cda |> filter(district_id_home |> district_id_bank) |> nrow()
```

We observe that `r home_diff_bank` clients have a bank to another

```{r}
cda |> group_by(accounts_id) |> 
  distinct(discrict_id_home) |> 
  summarise(N=n()) |> 
  filter(N>1)
```

### Gender gap
```{r}
clients |>
  ggplot(aes(y=gender)) +
  geom_bar()
```

```{r}
cda |>
  count(gender, type)
```

```{r}
#select(test(cda) |> pull(gender),
       cda |)
```

